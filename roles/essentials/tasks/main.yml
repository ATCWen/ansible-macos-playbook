---

- name: Update Homebrew
  shell: brew update --force
  changed_when: false
  check_mode: no

- name: Install curl.
  homebrew:
    name: curl
    state: latest
    install_options: with-libidn,with-nghttp2

# Not using "state: linked" because this would be executed every run
- name: Link brewed curl.
  shell: brew link --force curl
  args:
    creates: /usr/local/bin/curl

- name: Install git.
  homebrew:
    name: git
    state: latest
    install_options: with-brewed-curl,with-brewed-ssl

- name: Install vim.
  homebrew:
    name: vim
    state: latest
    install_options: with-override-system-vi

- name: Install other essential brews.
  homebrew:
    name: "{{ item }}"
    state: latest
  with_items:
    - tree
    - watch
    - wget
    - yarn
